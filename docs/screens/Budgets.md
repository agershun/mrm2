ехническое задание: Экран управления бюджетами ("Budgets")
1. Общее описание и назначение экрана
Экран "Budgets" является центральным пунктом доступа ко всем бюджетам и служит для административного управления ими. Он предоставляет пользователям и администраторам обзор иерархической структуры бюджетов, позволяет управлять доступом, отслеживать статус импорта финансовых данных (заказов на покупку (PO) и фактических затрат (Actuals)), а также инициировать и контролировать перераспределение средств между бюджетами.
Экран должен быть доступен по клику на вкладку "Budgets" в основной навигационной панели.
2. Структура и основные компоненты экрана
Экран "Budgets" представляет собой табличное представление иерархии бюджетов с набором инструментов управления над таблицей. Основные компоненты включают:
1. Панель действий (Action Bar): Расположена над таблицей и содержит кнопки + New, Delete, Copy, Move и Import.
2. Таблица иерархии бюджетов (Hierarchy Table): Основная область экрана, отображающая структуру бюджетов и ключевую информацию по каждому элементу.
3. Панели деталей (Panels): Вспомогательные окна, открывающиеся для просмотра сводных данных (Roll-up), управления пользователями или просмотра журнала аудита.
Важно: Видимость некоторых функций и кнопок зависит от прав доступа пользователя. Администраторы видят все функции, тогда как у обычных пользователей (маркетологов) некоторые элементы могут быть неактивны или скрыты.
3. Детальное описание компонентов и их функциональности
3.1. Таблица иерархии бюджетов (Hierarchy Table)
Это основной элемент экрана, отображающий все бюджеты в виде древовидной структуры.
• Структура иерархии:
    ◦ Иерархия состоит из папок (folders), подпапок (sub-folders) и планов инвестиций (investment plans), которые находятся на самом нижнем уровне.
    ◦ Папки и подпапки обозначаются иконкой папки, а планы инвестиций — иконкой таблицы.
    ◦ Каждый элемент с дочерними элементами должен иметь иконку-стрелку для сворачивания/разворачивания вложенной структуры.
    ◦ Структура иерархии создается во время внедрения системы и отражает организационную структуру маркетингового отдела (например, по региону, команде, продуктовой линейке).
    ◦ Каждый финансовый год создается новая иерархия.
• Столбцы таблицы:
    ◦ Hierarchy: Название папки, подпапки или плана инвестиций. Для папок отображается ссылка "view roll-up", а для планов инвестиций — "go to investment plan".
        ▪ Клик по "view roll-up" открывает панель со сводными (агрегированными) данными всех дочерних элементов.
        ▪ Клик по "go to investment plan" перенаправляет пользователя на экран "Investments" с открытым соответствующим планом.
    ◦ Panel: Иконка для открытия панели деталей, которая отображает ключевые данные элемента, настроенные при внедрении. На этой панели также можно найти уникальные идентификаторы Uptempo ID и Persistent ID.
    ◦ Users: Иконка пользователя с количеством, показывающая, кто имеет доступ к элементу. Клик по иконке открывает диалоговое окно со списком пользователей, их ролями и статусом регистрации (зарегистрирован или нет).
    ◦ Manage Users: Ссылка "edit" / "invite" (для администраторов) для управления доступом и приглашения новых пользователей в данный узел иерархии.
    ◦ Currency: Отображает валюту, в которой ведется планирование для данного элемента. Планирование может вестись в локальной валюте, а сводные данные (roll-up) будут отображаться в основной валюте иерархии.
    ◦ POs (Purchase Orders): Ссылка "map (x)", где 'x' — количество непривязанных заказов на покупку, которые были импортированы на данный уровень и требуют ручного сопоставления с конкретными статьями расходов (line items). Клик по ссылке ведет на экран маппинга.
    ◦ Actuals: Аналогично POs, но для фактических затрат. Ссылка "map (x)" ведет на экран сопоставления фактических данных.
    ◦ Approvals: Отображает статус запросов на утверждение бюджетов (если функция включена). Клик по ссылке открывает экран для принятия решений по запросам (утвердить/отклонить).
    ◦ Transfers: Ссылка "transfers (x)", где 'x' — количество активных запросов на перераспределение бюджета. Клик открывает обзор всех запросов на переводы и корректировки бюджета для данного элемента.
    ◦ Edit Settings: Ссылки "master settings" (на верхнем уровне) и "custom settings" (на вложенных уровнях) для доступа к административным настройкам. Master settings применяются ко всей иерархии, а custom settings — только к конкретной подпапке и ее дочерним элементам.
    ◦ Иконка Note Pad: Позволяет добавлять и просматривать заметки для любого элемента иерархии.
    ◦ Иконка Audit Trail: Открывает журнал аудита, где фиксируются все действия пользователей (кто, что и когда сделал).
3.2. Панель действий (Action Bar)
• Кнопки + New, Delete, Copy, Move:
    ◦ Эти кнопки предназначены только для владельцев системы (роль Owner) и используются для изменения структуры иерархии. Для остальных пользователей они должны быть неактивны.
    ◦ + New: Позволяет создать новую папку или план инвестиций.
    ◦ Delete: Удаляет выбранный элемент иерархии.
    ◦ Copy: Копирует весь план инвестиций или всю иерархию.
    ◦ Move: Перемещает элемент иерархии в другое место.
• Кнопка Import:
    ◦ Открывает выпадающее меню для импорта данных: Investment Plan, POs или Actuals.
    ◦ Функция доступна для пользователей с соответствующими правами (маркетологов).
3.3. Управление доступом и совместная работа
• Приглашение пользователей: Администраторы могут приглашать пользователей на любой уровень иерархии, назначая им одну из ролей (Owner, Administrator, Editor, Editor - Data Entry Only, Viewer).
• Просмотр соавторов: Любой пользователь может кликнуть на иконку Users и увидеть, кто еще имеет доступ к данному бюджету.
• Аудит действий: Функция Audit Trail обеспечивает прозрачность, позволяя отследить все изменения, внесенные пользователями в иерархии или планах инвестиций.
3.4. Управление финансовыми данными
• Импорт PO и Actuals: Пользователи могут импортировать финансовые данные из внешних систем через кнопку Import. Система может автоматически сопоставить данные с существующими статьями расходов или поместить их в специальный раздел для ручного маппинга.
• Маппинг (сопоставление): Если система не смогла автоматически сопоставить импортированные PO или Actuals, они попадают в "ведро" непривязанных данных. Пользователь должен перейти по ссылке "map (x)" и вручную указать, к какой статье расходов (line item) относится каждая транзакция.
• Перераспределение бюджетов (Transfers): Если функция включена, пользователи могут запрашивать перевод средств между разными планами инвестиций (Transfer) или корректировку (Adjustment) общего бюджета. Эти запросы проходят через процесс утверждения, который можно отслеживать через ссылку transfers.