Техническое задание: Экран планирования маркетинговых активностей ("Activities")
1. Общее описание и назначение экрана
Экран "Activities" — это основной инструмент для планирования и управления маркетинговыми активностями в системе. Он предоставляет пользователям возможность визуализировать, создавать, редактировать и анализировать иерархию маркетинговых планов, кампаний и тактик.
Экран должен быть доступен по клику на пункт "Activities" в основной навигационной панели. Следует учесть, что название этого раздела может быть настроено и отличаться в разных инсталляциях системы.
2. Структура и основные компоненты экрана
Экран "Activities" разделен на четыре основные функциональные области:
1. Иерархия активностей (Activity Hierarchy): Левая панель, отображающая список маркетинговых активностей в виде иерархической структуры (например, План -> Кампания -> Тактика).
2. Область отображения данных (Timeline/Summary Display): Основная правая часть экрана, где данные могут быть представлены в двух режимах: "Временная шкала" (Timeline) или "Сводка" (Summary).
3. Панель управления видом (Filtering and Grouping): Инструменты для фильтрации и группировки отображаемых активностей, расположенные над иерархией.
4. Помощник создания активности (Activity Setup Assistant): Пошаговый мастер, который открывается для создания новой активности.
3. Детальное описание компонентов и их функциональности
3.1. Иерархия активностей (Activity Hierarchy)
• Назначение: Отображение списка маркетинговых активностей в виде древовидной структуры. Эта структура показывает, как общие планы детализируются до конкретных действий.
• Отображение:
    ◦ Активности отображаются в иерархическом порядке. На одном уровне вложенности элементы сортируются по алфавиту.
    ◦ Каждый элемент в иерархии имеет иконку-стрелку (шеврон), позволяющую разворачивать и сворачивать вложенные (дочерние) активности.
    ◦ При наведении курсора на активность должна появляться кнопка + ("Add under") для быстрого создания дочерней активности.
• Поведение:
    ◦ Доступ: Пользователи видят только те активности, на просмотр которых у них есть права, настроенные администратором.
    ◦ Изменение ширины: Границу между панелью иерархии и областью данных можно перетаскивать, чтобы изменить ширину панели.
    ◦ Клик по активности: Клик по названию активности открывает панель деталей (Details Panel) справа.
• Быстрый поиск: Над иерархией должна быть строка поиска для быстрого нахождения активностей по имени или ID. Результаты поиска должны подсвечиваться и отображаться с сохранением их положения в иерархии (с отображением родительских элементов).
3.2. Область отображения данных (Timeline/Summary)
Это основная рабочая область, имеющая два взаимозаменяемых режима. Переключение между режимами осуществляется с помощью кнопок-иконок над областью данных.
3.2.1. Режим "Временная шкала" (Timeline Display Mode)
• Назначение: Визуализация активностей на календарной шкале в соответствии с их датами проведения ("in-market dates").
• Визуальные элементы:
    ◦ Каждая активность представлена в виде горизонтальной полосы (бара), длина которой соответствует длительности периода проведения.
    ◦ Вертикальная зеленая линия должна отмечать текущий день ("Today").
    ◦ Вверху шкалы отображаются временные отрезки (годы, кварталы, месяцы, недели).
• Интерактивность:
    ◦ Изменение дат: Период проведения активности можно изменять путем перетаскивания всей полосы (для сдвига дат) или ее краев (для изменения начала/конца).
    ◦ Масштабирование: Должны быть элементы управления (выпадающий список, кнопки + / -) для изменения масштаба отображения (например, от дней до годов). Масштабирование также должно быть доступно с помощью CTRL/CMD + колесо мыши. Настройки масштаба сбрасываются при уходе со страницы.
3.2.2. Режим "Сводка" (Summary Display Mode)
• Назначение: Отображение ключевых данных по активностям в виде таблицы для быстрого сравнения и анализа.
• Структура: Таблица, где каждая строка — это активность, а столбцы — это ее атрибуты и метрики.
• Данные по умолчанию: Таблица должна включать столбцы, такие как Activity, In-market Dates, Planned Costs, Planned Revenue, Actual ROI и другие.
• Функциональность:
    ◦ Настройка столбцов: Пользователь должен иметь возможность настраивать видимость и порядок столбцов через меню "Edit columns". Можно добавлять столбцы с пользовательскими KPI.
    ◦ Сортировка: Данные в таблице можно сортировать по любому столбцу в возрастающем или убывающем порядке по клику на заголовок столбца.
    ◦ Агрегация: Если применена группировка, таблица должна отображать итоговые (свернутые) значения для каждой группы. При разворачивании группы отображаются отдельные активности.
    ◦ Редактирование: Некоторые поля, например Estimated Costs, могут быть отредактированы прямо в таблице по двойному клику.
3.3. Панель управления видом (Filtering and Grouping)
• Расположение: Над списком активностей.
• Фильтр (Filter):
    ◦ При нажатии на кнопку "Filter" открывается меню для настройки условий фильтрации.
    ◦ Фильтрацию можно применять по типу активности, имени, датам проведения и любым другим атрибутам.
    ◦ Можно добавлять несколько условий фильтрации, которые работают по логике "И".
    ◦ Примененные фильтры отображаются над иерархией.
    ◦ Опция "Show full hierarchy" позволяет показать отфильтрованные активности вместе с их неактивными родительскими элементами для сохранения контекста иерархии.
• Группировка (Group by):
    ◦ Позволяет группировать активности по значению одного из атрибутов (например, по каналу, статусу, целевой аудитории).
    ◦ Активности, у которых не задано значение для атрибута группировки, попадают в группу "[Attribute name]: No value set".
• Сохранение вида (Views):
    ◦ Пользователь может сохранить любую комбинацию фильтров и группировок как именованное "представление" (View).
    ◦ Сохраненные представления доступны в выпадающем меню "Views" для быстрого применения.
    ◦ Представления могут быть личными ("Only for me") или общими для организации ("For my organization", доступно администраторам).
3.4. Помощник создания активности (Activity Setup Assistant)
• Активация: Открывается при нажатии на кнопку "Create Activity" или "Add under".
• Интерфейс: Пошаговый мастер, отображаемый на правой стороне экрана.
• Шаги мастера:
    1. Type: Выбор типа создаваемой активности и ее родительского элемента в иерархии. Если используется "Add under", родитель уже выбран.
    2. Details: Ввод названия, дат проведения ("in-market dates") и значений для других атрибутов, определенных для данного типа активности. Обязательные поля помечены звездочкой (*). Поддерживаются кликабельные URL в текстовых полях.
    3. Budget: Ввод оценочной стоимости (Estimated Costs) и привязка источников финансирования (Funding Source) из модуля Investments.
    4. Impact: Ввод плановых показателей эффективности (например, Planned Inquiries), на основе которых рассчитывается прогнозируемый доход (Planned Revenue Projection).
    5. Workflow (опционально): Если для типа активности настроена интеграция с рабочими процессами (workflow), на этом шаге можно настроить автоматический запуск связанного процесса.
• Завершение: После нажатия кнопки "Submit" мастер закрывается, и открывается панель деталей (Details Panel) для только что созданной активности.
4. Панель деталей активности (Details Panel)
• Открытие: Появляется справа при клике на любую активность в иерархии или после создания новой.
• Структура: Содержит несколько вкладок для просмотра и редактирования всей информации об активности.
• Основные вкладки:
    ◦ Details: Основные атрибуты активности, такие как имя, тип, даты, и другие пользовательские поля. Атрибуты могут быть сгруппированы администратором для удобства.
    ◦ Budget: Информация о финансировании. Включает Estimated Costs и привязанные инвестиции с разбивкой по категориям затрат (Planned, Expected, Actual Spend). Отображает Activity Roll-Up — сумму затрат дочерних активностей.
    ◦ Impact: Содержит две подвкладки: Planned для просмотра плановых показателей и диаграммы прогнозируемого дохода, и Actual для ввода фактических результатов по воронке продаж.
    ◦ KPIs: Если для типа активности настроены ключевые показатели эффективности (KPI), эта вкладка позволяет вводить плановые и фактические значения для них.
• Действия: В панели деталей доступны действия над активностью, такие как дублирование, перемещение в другой узел иерархии, синхронизация данных с workflow и удаление.