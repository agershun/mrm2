# Utempo Таблицы

20 сентября 2025 года

| № | Таблица | Описание | Поля | Методы доступа API |
| :---- | :---- | :---- | :---- | :---- |
| 1 | Activities | Хранит каждую отдельную маркетинговую активность (план, кампания, программа или тактика) | activity\_id: string (PK)name: stringactivity\_type\_id: string (FK ActivityTypes)parent\_activity\_id: string (FK Activities)in\_market\_start\_date: datein\_market\_end\_date: datestatus: string, enum \[Planning, Active, Completed, Cancelled, On Hold\]currency\_code: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActivities(filters: object, groupBy: string) \-\> array\[object\]Получает массив объектов Activity, соответствующих фильтрам. Используется для построения основных представлений на экране Activities. fetchActivities \- это синоним, используемый в сценариях.getActivity(id: string) \-\> objectПолучает один объект Activity по его activity\_id.createActivity(data: object) \-\> objectСоздает новую активность. data содержит поля, например {name: "New Event", activity\_type\_id: "..."}. Инициируется мастером CreateActivity.updateActivity(id: string, data: object) \-\> objectОбновляет данные активности, например, при изменении полей в DetailsPanel. updateActivityDates(activityId: string, newDates: object) и updateActivityAttributes(activityId, attributeValues) являются специфическими вариантами этого метода.deleteActivity(id: string) \-\> booleanУдаляет активность. Вызывается из меню Actions в DetailsPanel.duplicateActivity(id: string) \-\> objectСоздает полную копию иерархии активности. Используется для ускорения создания планов на новый год.moveActivity(id: string, newParentId: string) \-\> objectПеремещает активность в иерархии, изменяя parent\_activity\_id.syncActivityData(id: string) \-\> objectСинхронизирует данные активности с рабочим процессом (workflow). searchActivities(keyword) |
| 2 | ActivityTypes  | Шаблон для создания активностей, определяя их свойства и поведение в системе | activity\_type\_id: string (PK)name: stringactivity\_type\_group\_id: string (FK ActivityTypeGroups)workflow\_type\_id: stringenable\_impact\_modeling: boolenable\_estimated\_costs: boolis\_disabled: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActivityTypes() \-\> array\[object\]Получает список всех типов активностей, например для заполнения выпадающего списка в мастере CreateActivity.createActivityType(data: object) \-\> objectСоздает новый тип активности (шаблон). Вызывается администратором на экране ActivityConfiguration \> Activity Types.updateActivityType(id: string, data: object) \-\> objectОбновляет настройки типа активности, например, привязку атрибутов или включение Impact Modeling.disableActivityType(id: string) \-\> voidОтключает тип активности, делая его недоступным для создания новых активностей. deleteActivityType(id) |
| 3 | ActivityTypeGroups | Логическая группировка типов активностей | activity\_type\_group\_id: string (PK)name: stringis\_disabled: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActivityTypeGroups() \-\> array\[object\]Получает список всех групп типов активностей.createActivityTypeGroup(data: object) \-\> objectСоздает новую логическую группу для типов активностей. Используется для структурирования плана.updateActivityTypeGroup(id: string, data: object) \-\> objectОбновляет название или настройки группы.disableActivityTypeGroup(id: string) \-\> voidОтключает группу типов активностей. deleteActivityTypeGroup(id) |
| 4 | HierarchyRules  | Какие типы активностей могут быть вложены в другие, тем самым формируя структуру маркетингового плана | rule\_id: string (PK)parent\_group\_id: string (FK ActivityTypeGroups)parent\_type\_id: string (FK ActivityTypes)child\_group\_id: string (FK ActivityTypeGroups)child\_type\_id: string (FK ActivityTypes)is\_disabled: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getHierarchyRules() \-\> array\[object\]Получает все правила иерархии для определения допустимых вложений активностей.createHierarchyRule(data: object) \-\> objectСоздает новое правило, определяющее, какой тип/группа активностей может быть дочерним элементом для другого типа/группы.disableHierarchyRule(id: string) \-\> voidОтключает правило иерархии. deleteHierarchyRule(id)  |
| 5 | Attributes  | Справочник всех возможных настраиваемых атрибутов, которые можно присвоить активностям | attribute\_id: string (PK)name: stringtype: string, enum \[Date, Drop-down list, Multi-select list, Number or Metric, Text or Reference \#\]help\_text: stringshow\_percentages: boolis\_required: booldisplay\_order: intcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getAttributes() \-\> array\[object\]Получает справочник всех доступных атрибутов.createAttribute(data: object) \-\> objectСоздает новый настраиваемый атрибут (поле). Вызывается администратором в разделе Attribute Definitions.updateAttribute(id: string, data: object) \-\> objectОбновляет настройки атрибута, такие как help\_text или show\_percentages.deleteAttribute(id: string) \-\> voidУдаляет атрибут из системы. getAttributeGroups() \-\> array\[object\]Получает список всех групп атрибутов. Вызывается на экране AttributeGroups.createAttributeGroup(data: object) \-\> objectСоздает новую логическую группу для атрибутов, чтобы организовать их отображение в DetailsPanel. Вызывается на экране AttributeGroups.updateAttributeGroup(id: string, data: object) \-\> voidОбновляет состав атрибутов в группе. Вызывается на экране AttributeGroups.reorderAttributeGroups(orderData: object) \-\> voidИзменяет порядок отображения групп атрибутов в DetailsPanel. Вызывается на экране AttributeGroups. |
| 6 | AttributeListOptions  | Хранит возможные значения для атрибутов типа "Drop-down list" и "Multi-select list" | option\_id: string (PK)attribute\_id: string (FK Attributes)value: stringdisplay\_order: intis\_disabled: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getAttributeOptions(attributeId: string) \-\> array\[object\]Получает все возможные значения для атрибута типа "список". Используется для заполнения выпадающих списков в DetailsPanel или CreateActivity.addAttributeOptions(attributeId: string, options: array) \-\> voidДобавляет новые опции в список значений атрибута.updateAttributeOptions(attributeId: string, options: array) \-\> voidОбновляет существующие опции списка. deleteAttributeOption(optionId: string) \-\> voidУдаляет опцию из списка значений атрибута.importAttributeOptions(attributeId: string, data: object) \-\> voidИмпортирует опции списка из текстового формата для массового добавления.exportAttributeOptions(attributeId: string) \-\> objectЭкспортирует существующие опции списка в текстовый формат для копирования в другой атрибут.reorderAttributeOptions(orderData: object) \-\> voidИзменяет порядок отображения опций в выпадающем списке. orderData содержит новый порядок элементов. |
| 7 | ActivityAttributeValues  | Таблица для хранения конкретных значений атрибутов, присвоенных каждой активности. | activity\_id: string (FK Activities)attribute\_id: string (FK Attributes)value: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActivityAttributes(activityId: string) \-\> objectПолучает значения всех атрибутов для конкретной активности.updateActivityAttributes(activityId: string, attributeValues: object) \-\> voidОбновляет значения атрибутов для активности. attributeValues \- это объект {attribute\_id: "value", ...}. Вызывается при изменении полей в DetailsPanelDetails или при срабатывании зависимостей атрибутов. |
| 8 | AttributeDependencies  | Определяет логические связи между атрибутами, где выбор в одном поле (контролирующем) фильтрует доступные опции в другом (зависимом) | dependency\_id: string (PK)controlling\_attribute\_id: string (FK Attributes)dependent\_attribute\_id: string (FK Attributes)controlling\_option\_id: string (FK AttributeListOptions)dependent\_option\_id: string (FK AttributeListOptions)created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getAttributeDependencies() \-\> array\[object\]Получает все настроенные зависимости между атрибутами.createAttributeDependency(data: object) \-\> objectСоздает правило зависимости, где выбор в одном поле фильтрует опции в другом. Используется, например, для связки "Страна" \-\> "Город".updateAttributeDependency(id: string, data: object) \-\> objectОбновляет существующее правило зависимости. deleteAttributeDependency(id) |
| 9 | Investments  | Хранит информацию о статьях бюджета, с которыми связываются активности для финансированияЭто детальные строки расходов внутри каждого "Плана инвестиций". Именно на этом уровне вводятся данные о затратах. Структура включает категории, подкатегории и сами статьи расходов (line items). | investment\_id: string (PK)name: stringparent\_investment\_id: string (FK Investments)\<brbudget\_id: string (FK Budgets)investment\_type: string, enum \[Category, Sub-category, Line Item, Placeholder\]persistent\_id: stringnotes: stringis\_deleted: booldeleted\_at: datetimedeleted\_by: string (FK Users)created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getInvestments(investmentPlanId: string, filters: object) \-\> array\[object\]Получает все статьи расходов для определенного плана инвестиций.createInvestment(data: object) \-\> objectСоздает новую статью расходов (например, Line Item) в Investments. itemType имеет значения enum \[Category, Sub-category, Line Item, Placeholder\].updateInvestment(id: string, data: object) \-\> objectОбновляет данные статьи расходов, например, название или заметки.copyInvestment(id: string, options: object) \-\> objectКопирует статью расходов, возможно с атрибутами и значениями.moveInvestment(id: string, newParentId: string) \-\> objectПеремещает статью расходов в иерархии Investments. restoreInvestment(id) searchInvestments(keyword) |
| 10 | ActivityInvestments  | Таблица-связка для реализации отношения "многие-ко-многим" между активностями и статьями бюджета | connection\_id: string (PK)investment\_id: string (FK Investments)activity\_id: string (FK Activities)allocation\_type: string, enum \[Automatic, Manual\]created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getInvestmentConnections(investmentId: string) \-\> array\[object\]Получает все активности, связанные с данной статьей бюджета.getActivityConnections(activityId: string) \-\> array\[object\]Получает все статьи бюджета, связанные с данной активностью.connectActivityToInvestment(activityId: string, investmentId: string) \-\> objectСоздает связь "многие-ко-многим" между активностью и статьей бюджета. Вызывается методами linkInvestmentItem, connectActivity или linkFundingSource.disconnectActivityFromInvestment(connectionId: string) \-\> voidУдаляет связь между активностью и статьей бюджета. Вызывается, например, из DetailsPanelBudget. |
| 11 | InvestmentObjectives  | Таблица-связка, показывающая, какая статья инвестиций какой цели соответствует | investment\_id: string (FK Investments)objective\_id: string (FK Objectives)created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getInvestmentObjectives(investmentId: string) \-\> array\[object\]Получает все стратегические цели, связанные с данной статьей инвестиций.linkInvestmentToObjective(investmentId: string, objectiveId: string) \-\> voidПривязывает статью инвестиций к стратегической цели. Вызывается при выборе цели в InvestmentDetailsDetails.unlinkInvestmentFromObjective(investmentId: string, objectiveId: string) \-\> voidОтвязывает статью инвестиций от стратегической цели. |
| 12 | Costs  | Хранит различные виды затрат по активностям, включая предварительные, плановые и фактические | cost\_id: string (PK)activity\_id: string (FK Activities)cost\_type: string, enum \[Estimated, Planned, Actual\]amount: moneyperiod\_start: dateperiod\_end: datecreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActivityCosts(activityId: string) \-\> array\[object\]Получает все виды затрат (Estimated, Planned, Actual) для конкретной активности.updateActivityCosts(activityId: string, costData: object) \-\> voidОбщий метод для обновления данных о затратах. Используется, в частности, методом updateEstimatedCosts для сохранения предварительных оценок затрат, введенных в DetailsPanelBudget. |
| 13 | Budgets | Общая структура бюджетирования на фискальный год. Она состоит из папок, подпапок и планов инвестиций | budget\_id: string (PK)name: stringbudget\_type: string, enum \[Folder, Investment Plan\]parent\_budget\_id: string (FK Budgets)fiscal\_year: intcurrency\_code: stringowner\_id: string (FK Users)is\_locked: boolnotes: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getBudgetHierarchy(fiscalYear: int) \-\> array\[object\]Загружает древовидную структуру бюджетов (папки и планы) для указанного финансового года для отображения на экране Budgets.createBudgetFolder(data: object) \-\> objectСоздает новую папку в иерархии бюджетов. data: {name: string, parent\_budget\_id: string}.createInvestmentPlan(data: object) \-\> objectСоздает новый План Инвестиций. data: {name: string, parent\_budget\_id: string}.updateBudgetHierarchyItem(id: string, data: object) \-\> objectОбновляет элемент иерархии, например, переименовывает папку.getBudgetRollup(budgetId: string) \-\> objectПолучает агрегированные (сводные) финансовые данные для папки или плана. Вызывается панелью BudgetRollupPanel. Аналогичный метод в сценариях \- fetchRollupData. deleteBudgetHierarchyItem(id) |
| 14 | InvestmentValues  | Хранит все числовые значения (план, прогноз и т.д.) по каждой статье инвестиций, обычно с разбивкой по месяцам или кварталам | value\_id: string (PK)investment\_id: string (FK Investments)ncolumn\_id: string (FK NColumns)amount: moneyforecast\_status\_tag\_id: string (FK ForecastStatusTags)approval\_status: stringapprover\_id: string (FK Users)approval\_comment: stringchange\_request\_amount: moneycreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getInvestmentValues(investmentId: string) \-\> array\[object\]Получает все числовые значения (план, прогноз и т.д.) для конкретной статьи расходов.updateInvestmentValues(data: array\[object\]) \-\> voidОбновляет значения в ячейках Investments. data \- это массив объектов, каждый из которых содержит value\_id и новый amount.importInvestmentPlanData(investmentPlanId: string, data: object) \-\> voidИмпортирует данные в план инвестиций из файла.addCommentToInvestmentCell(valueId: string, comment: string) \-\> voidДобавляет комментарий к ячейке. Используется для функции начислений (Accruals).submitForApproval(valueId: string) \-\> voidОтправляет значение ячейки на утверждение. |
| 15 | ManualAllocations  | Если одна статья инвестиций финансирует несколько активностей, эта таблица хранит, какая сумма выделена на каждую из них | allocation\_id: string (PK)connection\_id: string (FK ActivityInvestments)ncolumn\_id: string (FK NColumns)allocated\_amount: moneycreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getManualAllocations(investmentId: string) \-\> array\[object\]Получает данные о ручном распределении средств между активностями. Вызывается панелью ActivityFundingPanel. В сценариях аналогичный метод \- fetchFundingAllocations.updateManualAllocations(investmentId: string, allocationData: array\[object\]) \-\> voidСохраняет изменения ручного распределения, сделанные в ActivityFundingPanel. |
| 16 | BudgetRequests  | Хранит запросы на перераспределение или корректировку бюджета между разными планами инвестиций | request\_id: string (PK)request\_type: string, enum \[Transfer, Adjustment\]from\_plan\_id: string (FK Budgets)to\_plan\_id: string (FK Budgets)amount: moneystatus: string, enum \[Pending, Approved, Denied\]requester\_id: string (FK Users)requested\_at: datetimeapprover\_id: string (FK Users)approved\_at: datetimedescription: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getBudgetRequests(filters: object) \-\> array\[object\]Получает список запросов на перераспределение для отображения на экране TransferRequests.createBudgetRequest(data: object) \-\> objectСоздает новый запрос на перевод или корректировку. Вызывается из RequestATransferAdjustment. request\_type имеет значения enum \[Transfer, Adjustment\]. Аналогичный метод в сценариях \- submitTransferRequest.approveBudgetRequest(requestId: string) \-\> voidУтверждает запрос на перераспределение средств. Вызывается с экрана TransferRequests.denyBudgetRequest(requestId: string) \-\> voidОтклоняет запрос на перераспределение средств. Вызывается с экрана TransferRequests.updateBudgetRequest(requestId: string, data: object) \-\> objectРедактирует существующий запрос. deleteBudgetRequest(requestId) |
| 17 | Actuals  | Таблица для хранения данных о реальных тратах, как правило, импортируемых из ERP-систем | actual\_id: string (PK)vendor: stringdescription: stringpo\_number: stringinvoice\_number: stringamount: moneytransaction\_date: dateis\_mapped: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActuals(filters: object) \-\> array\[object\]Получает отфильтрованный список фактических расходов, например, нераспределенных (is\_mapped=false).createActual(data: object) \-\> objectСоздает запись о фактических расходах вручную. Вызывается из InvestmentDetailsActuals.importActuals(data: object, options: object) \-\> objectИмпортирует фактические расходы из внешней финансовой системы. Основной метод получения данных.mapActual(actualId: string, investmentId: string) \-\> voidПривязывает фактический расход к статье бюджета.unmapActual(actualId: string) \-\> voidОтвязывает фактический расход от статьи бюджета. manageAmortization(id, data) |
| 18 | ActualsSplits  | Поскольку один фактический расход может относиться к нескольким статьям инвестиций, необходимы таблицы для их разделения (сплитования) | actual\_split\_id: string (PK)actual\_id: string (FK Actuals)investment\_id: string (FK Investments)amount: moneypercentage: percentcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActualSplits(actualId: string) \-\> array\[object\]Получает все части (сплиты) для конкретного фактического расхода. |
| 19 | Objectives  | Хранит корпоративные, маркетинговые и командные цели, с которыми связываются инвестиции для анализа стратегического соответствия | objective\_id: string (PK)title: stringdescription: stringlevel: string, enum \[Corporate, Marketing, Team\]owner\_id: string (FK Users)target\_date: datestatus: string, enum \[On track, Potentially at risk, At risk\]display\_order: intcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getObjectives() \-\> array\[object\]Получает все стратегические цели для отображения на экране Strategy.createObjective(data: object) \-\> objectСоздает новую карточку цели. level имеет значения enum \[Corporate, Marketing, Team\]. data: {title: string, level: string, ...}.updateObjective(id: string, data: object) \-\> objectОбновляет детали цели, такие как описание или статус. Вызывается из ObjectiveDetails.deleteObjective(id: string) \-\> voidУдаляет стратегическую цель. Вызывается из ObjectiveDetails.reorderObjectives(orderData: object) \-\> voidИзменяет порядок отображения (display\_order) целей внутри одного уровня на экране Strategy. |
| 20 | ObjectiveKeyResults | Результаты достижения стратегических целей | key\_result\_id: string (PK)objective\_id: string (FK Objectives)description: stringtarget\_date: datestatus: string, enum \[On track, Potentially at risk, At risk\]status\_update\_notes: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getObjectiveKeyResults(objectiveId: string) \-\> array\[object\]Получает все ключевые результаты для конкретной стратегической цели. Вызывается при открытии панели ObjectiveDetails.updateKeyResult(keyResultId: string, data: object) \-\> objectОбновляет ключевой результат, например, его статус или описание. Вызывается при изменении данных в ObjectiveDetails.addKeyResult(objectiveId: string, krData: object) \-\> objectДобавляет новый ключевой результат к цели. Вызывается из ObjectiveDetails. |
| 20 | PurchaseOrders  | Хранит информацию о задокументированных обязательствах по оплате. Заказы на закупку могут быть импортированы из внешних систем | po\_id: string (PK)po\_number: stringamount: moneyvendor\_name: stringstart\_date: dateend\_date: dateis\_mapped: booldescription: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getPurchaseOrders(filters: object) \-\> array\[object\]Получает список заказов на закупку (PO), соответствующих фильтрам, например, нераспределенные PO. Синонимы из сценариев: fetchConnectedPOs.createPurchaseOrder(data: object) \-\> objectСоздает запись о PO вручную. Вызывается из панели InvestmentDetailsPOs.updatePurchaseOrder(id: string, data: object) \-\> objectОбновляет данные существующего PO. Вызывается из панели InvestmentDetailsPOs.deletePurchaseOrder(id: string) \-\> voidУдаляет PO. Вызывается из панели InvestmentDetailsPOs.importPurchaseOrders(data: object, options: object) \-\> objectИмпортирует данные о PO из внешней финансовой системы. Основной метод получения данных о PO.mapPurchaseOrder(poId: string, investmentId: string) \-\> voidПривязывает (сопоставляет) импортированный PO к статье бюджета (investment).unmapPurchaseOrder(poId: string) \-\> voidОтвязывает PO от статьи бюджета.manageAmortization(id: string, data: object) \-\> voidУправляет амортизацией (распределением суммы PO по периодам). |
| 21 | POSplits | Поскольку один PO может относиться к нескольким статьям инвестиций, необходимы таблицы для их разделения (сплитования) | po\_split\_id: string (PK)po\_id: string (FK PurchaseOrders)investment\_id: string (FK Investments)amount: moneypercentage: percentcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getPurchaseOrderSplits(poId: string) \-\> array\[object\]Получает все части (сплиты) для конкретного заказа на закупку (PO).splitPurchaseOrder(poId: string, splitData: array\[object\]) \-\> voidСоздает или обновляет сплиты для PO. Вызывается из окна ManageSplitForPOActuals. |
| 22 | PerformanceData  | Хранит плановые и фактические данные о результатах активности (например, количество запросов, выручка) | performance\_id: string (PK)activity\_id: string (FK Activities)data\_type: string, enum \[Planned, Actual\]stage\_name: string (FK FunnelStages)value: intperiod: daterevenue: moneycreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getPerformanceData(activityId: string) \-\> array\[object\]Получает все данные по эффективности (плановые и фактические) для конкретной активности.updatePlannedPerformance(activityId: string, data: object) \-\> voidОбновляет плановые показатели эффективности, например, количество запросов. data: {dataType: "Planned", ...}. Вызывается из DetailsPanelImpact.updateActualPerformance(activityId: string, data: object) \-\> voidОбновляет фактические показатели эффективности. data: {dataType: "Actual", ...}. Вызывается из DetailsPanelImpact. |
| 23 | KPIs  | Справочник для хранения пользовательских KPI | kpi\_id: string (PK)name: stringdescription: stringvalue\_type: string, enum \[Number, Currency, Percentage\]calculation\_type: string, enum \[Sum, Average\]improvement\_direction: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getKPIs() \-\> array\[object\]Получает справочник всех доступных KPI.createKPI(data: object) \-\> objectСоздает новый KPI. Вызывается администратором в разделе ActivityConfiguration \> KPIs.updateKPI(id: string, data: object) \-\> objectОбновляет настройки KPI.deleteKPI(id: string) \-\> voidУдаляет KPI из системы. |
| 24 | ActivityKPIValues  | Хранит плановые и фактические значения KPI для конкретных активностей | activity\_id: string (FK Activities)kpi\_id: string (FK KPIs)data\_type: string, enum \[Planned, Actual\]value: doubleperiod: datecreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActivityKPIs(activityId: string) \-\> array\[object\]Получает значения всех KPI для конкретной активности.updateActivityPlannedKPIs(activityId: string, kpiData: object) \-\> voidОбновляет плановые значения KPI для активности. Вызывается из DetailsPanelKPIs.updateActivityActualKPIs(activityId: string, kpiData: object) \-\> voidОбновляет фактические значения KPI для активности. Вызывается из DetailsPanelKPIs. |
| 25 | NColumns  | Справочник всех настраиваемых полей и столбцов в системе (например, "Jan Plan", "Q1 Forecast", "Target Audience") | ncolumn\_id: string (PK)name: stringlocation: string, enum \[Investments Grid, Details Panel, Actuals Panel, Grand Total Panel, PO Panel, Roll-up Panel, Transfer Form\]data\_type: string, enum \[Currency, Currency (non-calculating), Date, Drop-down list, Multi-select list, Number or Metric, Text or Reference \#, Calculation, Commit, Invoice, Over/Under, Target\]is\_required: boolauto\_distribution\_reference\_id: string (FK NColumns)color: stringis\_locked\_for\_role: string (FK Roles)is\_in\_quick\_entry\_form: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getNColumns(location: string) \-\> array\[object\]Получает список всех настраиваемых полей для определенного местоположения, например, Investments Grid.createNColumn(data: object) \-\> objectСоздает новое настраиваемое поле/столбец. Вызывается администратором на экране SpendNColumnsSettings.updateNColumn(id: string, data: object) \-\> objectОбновляет настройки поля, например, делает его обязательным или блокирует.deleteNColumn(id: string) \-\> voidУдаляет настраиваемое поле/столбец.takeSnapshot(ncolumnId: string) \-\> voidСоздает копию (снимок) столбца с текущими значениями. setColumnColor(id, color) |
| 26 | ForecastStatusTags  | Справочники для тегов, которые присваиваются расходам для анализа и фильтрации | forecast\_status\_tag\_id: string (PK)name: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getForecastStatusTags() \-\> array\[object\]Получает справочник всех тегов статуса прогноза.createForecastStatusTag(data: object) \-\> objectСоздает новый тег статуса. Вызывается на экране SpendTagsScenariosSettings.updateForecastStatusTag(id: string, data: object) \-\> objectОбновляет существующий тег статуса.deleteForecastStatusTag(id: string) \-\> voidУдаляет тег статуса. |
| 27 | ScenarioTags | Справочники для тегов, которые присваиваются расходам для анализа и фильтрации | scenario\_tag\_id: string (PK)name: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getScenarioTags() \-\> array\[object\]Получает справочник всех тегов сценариев.createScenarioTag(data: object) \-\> objectСоздает новый тег сценария. Вызывается на экране SpendTagsScenariosSettings.updateScenarioTag(id: string, data: object) \-\> objectОбновляет существующий тег сценария.deleteScenarioTag(id: string) \-\> voidУдаляет тег сценария. |
| 28 | Users | Список пользователей | user\_id: string (PK)first\_name: stringlast\_name: stringemail: stringrole\_id: string (FK Roles)last\_login\_at: datetimelogin\_count: intis\_active: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getUsers() \-\> array\[object\]Получает список всех пользователей в организации.getUser(id: string) \-\> objectПолучает данные конкретного пользователя по его ID.inviteUser(data: object) \-\> voidПриглашает нового пользователя в систему. data: {email: string, firstName: string, lastName: string, roleId: string}. Вызывается из InviteUsersDialog. inviteUserToHierarchy \- аналогичный метод в сценариях.resendInvite(userId: string) \-\> voidПовторно отправляет приглашение пользователю. |
| 29 | Roles | Список ролей | role\_id: string (PK)role\_name: string, enum \[Owner, Administrator, Editor, Editor \- Data Entry Only, Viewer\]description: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getRoles() \-\> array\[object\]Получает список всех доступных ролей в системе.updateUserRole(userId: string, roleId: string) \-\> voidИзменяет роль конкретного пользователя. |
| 30 | Teams | Команды | team\_id: string (PK)team\_name: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getTeams() \-\> array\[object\]Получает список всех команд.createTeam(data: object) \-\> objectСоздает новую команду.addUserToTeam(userId: string, teamId: string) \-\> voidДобавляет пользователя в команду.removeUserFromTeam(userId: string, teamId: string) \-\> voidУдаляет пользователя из команды. |
| 31 | UserTeams | Связь пользователя и команды | user\_id: string (FK Users)team\_id: string (FK Teams)created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getUserTeams(userId: string) \-\> array\[object\]Получает список команд, в которых состоит пользователь. |
| 32 | AccessControlPolicies | Контрольные политики | policy\_id: string (PK)name: stringdescription: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getAccessPolicies() \-\> array\[object\]Получает список всех политик доступа. Используется на экране ActivityPolicies.createAccessPolicy(data: object) \-\> objectСоздает новую политику доступа. Вызывается администратором с экрана ActivityPolicies.updateAccessPolicy(id: string, data: object) \-\> objectОбновляет существующую политику доступа.deleteAccessPolicy(id: string) \-\> voidУдаляет политику доступа. |
| 33 | AccessControlStatements | Утверждения | statement\_id: string (PK)policy\_id: string (FK AccessControlPolicies)effect: string, enum \[Allow, Deny\]action: string, enum \[View, Edit\]resource\_conditions: objectcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getPolicyStatements(policyId: string) \-\> array\[object\]Получает все утверждения (правила) для конкретной политики.addStatementToPolicy(policyId: string, statementData: object) \-\> objectДобавляет новое утверждение в политику, определяющее, что Allow (разрешить) или Deny (запретить) для действия (View или Edit) при определенных условиях (resource\_conditions).updateStatement(statementId: string, data: object) \-\> objectОбновляет существующее утверждение.deleteStatement(statementId: string) \-\> voidУдаляет утверждение из политики. |
| 34 | PolicyLinks | Связи политик | link\_id: string (PK)policy\_id: string (FK AccessControlPolicies)user\_id: string (FK Users)team\_id: string (FK Teams)created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getPolicyLinks(policyId: string) \-\> array\[object\]Получает список всех пользователей и команд, к которым привязана политика.linkPolicyToUser(policyId: string, userId: string) \-\> voidПривязывает политику к конкретному пользователю.linkPolicyToTeam(policyId: string, teamId: string) \-\> voidПривязывает политику к команде.unlinkPolicy(linkId: string) \-\> voidОтвязывает политику от пользователя или команды. |
| 35 | WorkflowTypes | Типы рабочих процессов | workflow\_type\_id: string (PK)name: stringdescription: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getWorkflowTypes() \-\> array\[object\]Получает список всех доступных типов рабочих процессов (workflow). |
| 36 | Workflows |  | workflow\_instance\_id: string (PK)activity\_id: string (FK Activities)workflow\_type\_id: string (FK WorkflowTypes)status: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getActivityWorkflow(activityId: string) \-\> objectПолучает экземпляр рабочего процесса, связанный с активностью.startWorkflowForActivity(activityId: string) \-\> voidЗапускает рабочий процесс для активности. Может вызываться автоматически при создании активности или вручную.triggerWorkflowSync(activityId: string) \-\> voidИнициирует синхронизацию данных между активностью и связанным рабочим процессом. Аналогичный метод в сценариях \- syncActivityWithWorkflow. |
| 37 | WorkflowVariables | Переменные рабочих процессов | variable\_id: string (PK)workflow\_type\_id: string (FK WorkflowTypes)technical\_name: stringdisplay\_name: stringdata\_type: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getWorkflowTypeVariables(workflowTypeId: string) \-\> array\[object\]Получает переменные для указанного типа рабочего процесса. |
| 38 | Views | Представления | view\_id: string (PK)name: stringdescription: stringowner\_id: string (FK Users)view\_type: string, enum \[personal, organization\]display\_order: intis\_default: boolcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getViews(type: string) \-\> array\[object\]type имеет значения enum \[personal, organization\]. Получает список личных или организационных представлений.createView(data: object) \-\> objectСоздает новое представление. Вызывается с экрана ViewOptions под названием saveNewView.updateView(id: string, data: object) \-\> objectОбновляет существующее представление, например, его название, описание или настройки фильтров.deleteView(id: string) \-\> voidУдаляет представление.applyView(viewId: string) \-\> voidПрименяет сохраненное представление (набор фильтров и группировок) к экрану Activities.reorderOrganizationViews(orderData: object) \-\> voidИзменяет порядок отображения организационных представлений. |
| 39 | ViewSettings | Настройки представлений | view\_id: string (FK Views)setting\_type: string, enum \[filter, group\_by\]attribute\_id: string (FK Attributes)condition: stringvalue: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getViewSettings(viewId: string) \-\> array\[object\]Получает конкретные настройки (фильтры, группировки) для указанного представления. |
| 40 | FunnelStages | Стадии воронки продаж | stage\_id: string (PK)name: stringdisplay\_order: intdefault\_conversion\_rate: percentdefault\_velocity\_days: intcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getFunnelStages() \-\> array\[object\]Получает текущие настройки этапов воронки продаж. Вызывается на экране ActivityImpactModeler.setFunnelStages(stagesData: array\[object\]) \-\> voidСохраняет обновленные настройки для этапов воронки, включая name, display\_order, default\_conversion\_rate, default\_velocity\_days.resetFunnel() \-\> voidСбрасывает все настройки воронки к значениям по умолчанию. |
| 41 | FunnelExceptions | Исключения для воронки | exception\_id: string (PK)attribute1\_id: string (FK Attributes)attribute1\_option\_id: stringattribute2\_id: string (FK Attributes)attribute2\_option\_id: stringstage\_id: string (FK FunnelStages)conversion\_rate: percentvelocity\_days: intdeal\_size: moneycreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getFunnelExceptions() \-\> array\[object\]Получает все настроенные исключения для воронки на основе атрибутов.setFunnelExceptions(exceptionsData: array\[object\]) \-\> voidСохраняет новые или обновленные исключения для коэффициентов конверсии, скорости прохождения воронки или размера сделки. |
| 42 | ImportTemplates | Хранит сохраненные пользователем шаблоны для импорта данных (POs, Actuals, Investment Plan). Содержит настройки сопоставления полей, обработки дубликатов и правила маппинга, что позволяет повторно использовать их для однотипных файлов. | template\_id: string (PK)name: stringowner\_id: string (FK Users)import\_type: string, enum \[POs, Actuals, Investment Plan\]hierarchy\_level\_id: string (FK Budgets)field\_mappings: objectduplicate\_handling\_rules: objectmapping\_rules: objectcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getImportTemplates(hierarchyLevelId: string) \-\> array\[object\]Получает список сохраненных шаблонов импорта для указанного уровня иерархии бюджета.createImportTemplate(data: object) \-\> objectСохраняет настройки текущего импорта как новый шаблон для будущего использования. import\_type имеет значения enum \[POs, Actuals, Investment Plan\].updateImportTemplate(id: string, data: object) \-\> voidОбновляет существующий шаблон импорта.deleteImportTemplate(id: string) \-\> voidУдаляет сохраненный шаблон импорта. |
| 43 | ScheduledImports | Хранит настройки запланированных (автоматических) импортов. Включает в себя информацию о расписании (ежедневно, еженедельно), параметрах подключения к FTP/SFTP серверу, пути к файлу и используемом шаблоне импорта. | schedule\_id: string (PK)name: stringtemplate\_id: string (FK ImportTemplates)import\_type: string, enum \[POs, Actuals\]is\_active: boolschedule\_frequency: string, enum \[daily, weekly, monthly\]schedule\_time: stringftp\_host: stringftp\_port: intftp\_username: stringftp\_password\_encrypted: stringfile\_path: stringlast\_run\_at: datetimenext\_run\_at: datetimecreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getScheduledImports(hierarchyLevelId: string) \-\> array\[object\]Получает список всех запланированных (автоматических) импортов.createScheduledImport(data: object) \-\> objectСоздает новый запланированный импорт с указанием частоты (daily, weekly, monthly), настроек FTP и используемого шаблона.updateScheduledImport(id: string, data: object) \-\> objectОбновляет настройки существующего запланированного импорта.toggleScheduledImport(id: string, isActive: bool) \-\> voidВключает или отключает запланированный импорт.deleteScheduledImport(id: string) \-\> voidУдаляет запланированный импорт. |
| 44 | ImportHistory | Записывает лог каждого выполненного импорта (как ручного, так и автоматического). Хранит статус импорта, количество обработанных, сопоставленных и не сопоставленных строк, а также информацию о дубликатах. | import\_id: string (PK)schedule\_id: string (FK ScheduledImports)user\_id: string (FK Users)import\_timestamp: datetimestatus: string, enum \[success, failed, partial\]file\_name: stringrows\_processed: introws\_mapped: introws\_unmapped: introws\_duplicates: introws\_replaced: interror\_log: stringsource\_file\_path: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getImportHistory(hierarchyLevelId: string) \-\> array\[object\]Получает историю всех прошлых импортов для указанного уровня иерархии.getImportDetails(importId: string) \-\> objectПолучает детальную информацию о конкретном импорте, включая количество обработанных, сопоставленных и несопоставленных строк.downloadImportFile(importId: string) \-\> fileПозволяет скачать исходный файл, который был использован для импорта. |
| 45 | CellComments | Хранит комментарии, оставленные пользователями в конкретных ячейках (InvestmentValues) на экране Investments. Связывает комментарий с ячейкой, пользователем и временной меткой. | comment\_id: string (PK)value\_id: string (FK InvestmentValues)user\_id: string (FK Users)comment\_text: stringcreated\_by: string (FK Users)updated\_by: string (FK Users)\<brcreated\_at: datetimeupdated\_at: datetime | getCellComments(valueId: string) \-\> array\[object\]Получает все комментарии для конкретной ячейки в Investments.addCellComment(valueId: string, commentData: object) \-\> voidДобавляет новый комментарий к ячейке. commentData содержит user\_id и comment\_text. Используется для функции начислений (Accruals).updateCellComment(id: string, commentData: object) \-\> voidРедактирует существующий комментарий.deleteCellComment(id: string) \-\> voidУдаляет комментарий. |
| 46 | AuditTrail | Хранит детальный лог всех действий пользователей в системе: создание, изменение, удаление объектов (бюджетов, инвестиций, активностей, связей), а также изменения в настройках. Записывает, кто, что и когда сделал. | log\_id: string (PK)user\_id: string (FK Users)action\_timestamp: datetimeaction\_type: string, enum \[create, update, delete, link, unlink\]object\_type: string, enum \[Investment, Budget, PO, Actual, Activity, Comment\]object\_id: stringparent\_object\_type: stringparent\_object\_id: stringchange\_details: objectcreated\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getAuditTrail(objectId: string, objectType: string, filters: object) \-\> array\[object\]objectType: enum \[Investment, Budget, PO, Actual, Activity, Comment\]. Получает журнал всех действий пользователей, связанных с определенным объектом (например, статьей бюджета). |
| 47 | RolePermissions | Таблица-связка, которая определяет набор разрешений для каждой роли.  Устанавливает связь "многие-ко-многим" между ролями (Roles) и справочником всех возможных системных разрешений (Permissions) | role\_id: string (FK Roles)permission\_id: string (FK Permissions)created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | getRolePermissions(roleId: string) \-\> array\[object\]Получает набор разрешений для конкретной роли.updateRolePermissions(roleId: string, permissionsData: object) \-\> voidОбновляет разрешения для роли. Вызывается администратором на экране RoleManagement. |
| 48 | Permissions | Таблица разрешений | permission\_id: string (PK)created\_by: string (FK Users)updated\_by: string (FK Users)created\_at: datetimeupdated\_at: datetime | Управление разрешениями осуществляется через таблицу RolePermissions. |

